@using Microsoft.AspNetCore.Components.Web

<CascadingValue Value="this">
    <ErrorBoundary @ref="errorBoundary">
        <ChildContent>
            @ChildContent
        </ChildContent>
        <ErrorContent Context="exception">
            <div class="alert alert-danger m-3" role="alert">
                <h4 class="alert-heading">
                    <i class="bi bi-exclamation-triangle-fill me-2"></i>
                    An error occurred
                </h4>
                <p>@exception.Message</p>
                <hr>
                <p class="mb-0">
                    <button class="btn btn-danger" @onclick="Recover">
                        <i class="bi bi-arrow-clockwise me-2"></i>
                        Try Again
                    </button>
                    <a href="/" class="btn btn-secondary ms-2">
                        <i class="bi bi-house-door me-2"></i>
                        Go Home
                    </a>
                </p>
            </div>
        </ErrorContent>
    </ErrorBoundary>
</CascadingValue>

@code {
    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    private ErrorBoundary? errorBoundary;

    private void Recover()
    {
        errorBoundary?.Recover();
    }

    public void Reset()
    {
        errorBoundary?.Recover();
    }
}
